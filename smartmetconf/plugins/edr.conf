# Supported data queries
data_queries:
{
    default = ["position","radius","area","cube","locations","trajectory","corridor"];
    override:
    {
        METAR = ["locations","corridor","area","position","radius"];
        TAF = ["locations","corridor","area","position","radius"];
        SIGMET = ["locations","corridor","area","position","radius"];
    };
};

# Supported output formats
output_formats:
{
    default = ["CoverageJSON","GeoJSON"];
    override:
    {
        METAR = ["CoverageJSON","GeoJSON","IWXXM","TAC"];
        SIGMET = ["CoverageJSON","GeoJSON","IWXXM","TAC"];
        TAF = ["CoverageJSON","GeoJSON","IWXXM","TAC"];
    };
};

# Obligatory localization parameters:

language	    = "en";
locale		    = "en_US.utf8";
url		    = "/edr";
timeformat	    = "iso";

observation_disabled  = true;
aviengine_disabled  = true;
gridengine_disabled = true;

# If this is true observation engine does not execute database queries, only cache is used
#prevent_observation_database_query = true;

# The forecast source (querydata/grid) that handles queries that do not contain producer information
primaryForecastSource = "querydata";

#parameterAliasFiles = ["/home/reponen/work/smartmet/plugins/timeseries/cnf/timeseries_alias.cfg"];


# expiration time in seconds, zero disables caching
expires	= 60;

# maximum distance for observations and point forecasts unless overridden by qengine.conf (not relevant for grids)
maxdistance	= 60.0;

wxml:
{
	timestring	= "%Y-%b-%dT%H:%M:%S";
	version		= "2.00";
	schema		= "http://services.weatherproof.fi http://services.weatherproof.fi/schemas/pointweather_{version}.xsd";
};

xml:
{
	tag	= "areaforecast";
};

function_settings:
{
	sliding:
	{
	// by default sliding mode is used for all functions
		default = true;
#		min = false;
	};

	interval = 0; // zero means interval is equal to result set size
};

api:
{
	#templatedir	= "/etc/smartmet/plugins/edr/tmpl";
	items:
	(
		{
			url = "/edr";
			template = "home.json";
		},
		{
			url = "/edr/api";
			template = "api.json";
		},
		{
			url = "/edr/api/conformance";
			template = "conformance.json";
		}
	)
};

// display precision for variables
// note: g++ (GCC) 4.1.2 20071124 (Red Hat 4.1.2-42)
// seems to have a bug in copying maps in maps.
// Define atleast one variable besides "default"
// to make sure the map of precisions is not empty.

precision:
{
	// default is the first one listed

	enabled = ["normal","double","full","auto"];
	    // The automagic uses precision from data
    	    auto:
    	    {	       
            	       default: -1;
    	    };


	// normal output mode for meteograms & tables
	normal:
	{
		default			= 0;

		Precipitation1h		= 1;
		SigWaveHeight		= 1;
		CorrectedReflectivity	= 1;
		TotalPrecipitationF0	= 1;
		TotalPrecipitationF10	= 1;
		TotalPrecipitationF25	= 1;
		TotalPrecipitationF50	= 1;
		TotalPrecipitationF75	= 1;
		TotalPrecipitationF90	= 1;
		TotalPrecipitationF100	= 1;
		PrecipitationRate	= 2;

		stationlatitude		= 5;
		stationlat		= 5;
		stationlongitude	= 5;
		stationlon		= 5;
		latitude		= 5;
		longitude		= 5;
		lon			= 5;
		lat			= 5;
		latlon			= 5;
		lonlat			= 5;
		nearlatitude		= 5;
		nearlongitude		= 5;
		nearlatlon		= 5;
		nearlonlat		= 5;
		direction		= 1;
		distance		= 1;
		elevation		= 1;
		sunelevation		= 1;
		sundeclination		= 1;
		sunazimuth		= 1;
		moonphase		= 1;
		wsp_pt1s_avg		= 1;
		wdp_pt1s_avg		= 0;
		rhp_pt1s_avg		= 1;
		tdp_pt1s_avg		= 1;
		tap_pt1s_avg		= 1;
		uep_pt1s_avg		= 1;
		uap_pt1s_avg		= 1;
		level_no		= 0;
		level_status		= 0;
		level_time		= 0;
		level_altitude		= 0;
		level_pressure		= 1;
		level_longitude		= 5;
		level_latitude		= 5;
		sounding_type		= 0;
	};

	// double precision for graphs
	double:
	{
		default			= 1;

		PrecipitationForm	= 0;
		PrecipitationType	= 0;
		WeatherSymbol1		= 0;
		WeatherSymbol3		= 0;

		CorrectedReflectivity	= 2;
		TotalPrecipitationF0	= 2;
		TotalPrecipitationF10	= 2;
		TotalPrecipitationF25	= 2;
		TotalPrecipitationF50	= 2;
		TotalPrecipitationF75	= 2;
		TotalPrecipitationF90	= 2;
		TotalPrecipitationF100	= 2;
		PrecipitationRate	= 4;

		stationlatitude		= 7;
		stationlat		= 7;
		stationlongitude	= 7;
		stationlon		= 7;
		latitude		= 7;
		longitude		= 7;
		lon			= 7;
		lat			= 7;
		latlon			= 7;
		lonlat			= 7;
		nearlatitude		= 7;
		nearlongitude		= 7;
		nearlatlon		= 7;
		nearlonlat		= 7;
		direction		= 2;
		distance		= 2;
		elevation		= 2;
		sunelevation		= 2;
		sundeclination		= 2;
		sunazimuth		= 2;
		moonphase		= 2;
		wsp_pt1s_avg		= 1;
		wdp_pt1s_avg		= 0;
		rhp_pt1s_avg		= 1;
		tdp_pt1s_avg		= 3;
		tap_pt1s_avg		= 3;
		uep_pt1s_avg		= 3;
		uap_pt1s_avg		= 3;
		level_no		= 0;
		level_status		= 0;
		level_time		= 0;
		level_altitude		= 0;
		level_pressure		= 1;
		level_longitude		= 7;
		level_latitude		= 7;
		sounding_type		= 0;
	};

	// full precision for math etc
	full:
	{
		default			= 16;

		PrecipitationForm	= 0;
		PrecipitationType	= 0;
		WeatherSymbol1		= 0;
		WeatherSymbol3		= 0;
	};
};

collection_info:
{
  querydata_engine:
  (
    {
      id = "ecmwf_surface";
      title = "ECMWF Surface";
      description = "These products are a subset of the ECMWF real-time forecast data and are made available to the public free of charge. They are based on the medium-range (high-resolution and ensemble) and seasonal forecast models. Products are available at 0.4 degrees resolution. The data are released 1 hour after the real-time dissemination schedule.";
      keywords = ["ecmwf","model"];
    },
    {
      id = "meps_surface";
      title = "MEPS Surface";
      description = "";
      keywords = ["meps","model"];
    },
    {
      id = "gfs_surface";
      title = "GFS Surface Level Forecast";
      description = "Global Forecast System (GFS) surface level data from NOAA. GFS is a global numerical weather prediction system providing forecasts out to 16 days. The system produces meteorological forecasts four times daily with a horizontal resolution of approximately 13 km for days 0-10 and 25 km for days 10-16. Surface level data includes parameters such as temperature, precipitation, wind, and pressure at the Earth's surface.";
      keywords = ["gfs","noaa","global","nwp","surface","forecast"];
    },
    {
      id = "gfs_pressure";
      title = "GFS Pressure Level Forecast";
      description = "Global Forecast System (GFS) pressure level data from NOAA. This collection provides atmospheric data at various pressure levels (isobaric surfaces) including temperature, wind, humidity, and geopotential height. Pressure level data is essential for understanding upper-air conditions and atmospheric dynamics.";
      keywords = ["gfs","noaa","global","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "gem_surface";
      title = "GEM Surface Level Forecast";
      description = "Global Environmental Multiscale (GEM) model surface level data from Environment and Climate Change Canada (ECCC). GEM is a global numerical weather prediction model providing high-resolution forecasts. Surface level data includes atmospheric parameters at the Earth's surface such as temperature, precipitation, wind speed and direction, and surface pressure.";
      keywords = ["gem","eccc","canada","global","nwp","surface","forecast"];
    },
    {
      id = "gem_pressure";
      title = "GEM Pressure Level Forecast";
      description = "Global Environmental Multiscale (GEM) model pressure level data from Environment and Climate Change Canada (ECCC). This collection provides atmospheric data at standard pressure levels including temperature, wind components, relative humidity, and geopotential height for upper-air analysis and forecasting.";
      keywords = ["gem","eccc","canada","global","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "icon_surface";
      title = "ICON Surface Level Forecast";
      description = "ICOsahedral Nonhydrostatic (ICON) model surface level data from Deutscher Wetterdienst (DWD). ICON is a global numerical weather prediction model with a horizontal resolution of approximately 13 km. Surface level data includes meteorological parameters at the Earth's surface such as temperature, precipitation, wind, cloud cover, and surface pressure.";
      keywords = ["icon","dwd","germany","global","nwp","surface","forecast"];
    },
    {
      id = "icon_pressure";
      title = "ICON Pressure Level Forecast";
      description = "ICOsahedral Nonhydrostatic (ICON) model pressure level data from Deutscher Wetterdienst (DWD). This collection provides atmospheric variables at standard pressure levels including temperature, wind components, relative humidity, and geopotential height for detailed upper-air analysis and forecasting applications.";
      keywords = ["icon","dwd","germany","global","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "wrf_surface";
      title = "WRF Surface Level Forecast";
      description = "Weather Research and Forecasting (WRF) model surface level data. WRF is a mesoscale numerical weather prediction system designed for both atmospheric research and operational forecasting applications. Surface level data provides high-resolution meteorological parameters at the Earth's surface including temperature, precipitation, wind, and other atmospheric variables.";
      keywords = ["wrf","mesoscale","nwp","surface","forecast","research"];
    },
    {
      id = "arpege_surface";
      title = "ARPEGE Surface Level Forecast";
      description = "Action de Recherche Petite Echelle Grande Echelle (ARPEGE) model surface level data from Météo-France. ARPEGE is a global numerical weather prediction model with variable resolution, providing detailed forecasts especially over Europe and the Mediterranean region. Surface level data includes meteorological parameters at the Earth's surface such as temperature, precipitation, wind, and surface pressure.";
      keywords = ["arpege","meteofrance","france","global","nwp","surface","forecast"];
    },
    {
      id = "arpege_pressure";
      title = "ARPEGE Pressure Level Forecast";
      description = "Action de Recherche Petite Echelle Grande Echelle (ARPEGE) model pressure level data from Météo-France. This collection provides atmospheric data at standard pressure levels including temperature, wind components, relative humidity, and geopotential height. The variable resolution allows for more detailed representation over areas of interest.";
      keywords = ["arpege","meteofrance","france","global","nwp","pressure","isobaric","forecast"];
    }
  )
}
