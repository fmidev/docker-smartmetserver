# Supported data queries
data_queries:
{
    default = ["position","radius","area","cube","locations","trajectory","corridor"];
    override:
    {
        METAR = ["locations","corridor","area","position","radius"];
        TAF = ["locations","corridor","area","position","radius"];
        SIGMET = ["locations","corridor","area","position","radius"];
    };
};

# Supported output formats
output_formats:
{
    default = ["CoverageJSON","GeoJSON"];
    override:
    {
        METAR = ["CoverageJSON","GeoJSON","IWXXM","TAC"];
        SIGMET = ["CoverageJSON","GeoJSON","IWXXM","TAC"];
        TAF = ["CoverageJSON","GeoJSON","IWXXM","TAC"];
    };
};

# Obligatory localization parameters:

language	    = "en";
locale		    = "en_US.utf8";
url		    = "/edr";
timeformat	    = "iso";

observation_disabled  = true;
aviengine_disabled  = true;
gridengine_disabled = true;

# If this is true observation engine does not execute database queries, only cache is used
#prevent_observation_database_query = true;

# The forecast source (querydata/grid) that handles queries that do not contain producer information
primaryForecastSource = "querydata";

#parameterAliasFiles = ["/home/reponen/work/smartmet/plugins/timeseries/cnf/timeseries_alias.cfg"];


# expiration time in seconds, zero disables caching
expires	= 60;

# maximum distance for observations and point forecasts unless overridden by qengine.conf (not relevant for grids)
maxdistance	= 60.0;

wxml:
{
	timestring	= "%Y-%b-%dT%H:%M:%S";
	version		= "2.00";
	schema		= "http://services.weatherproof.fi http://services.weatherproof.fi/schemas/pointweather_{version}.xsd";
};

xml:
{
	tag	= "areaforecast";
};

function_settings:
{
	sliding:
	{
	// by default sliding mode is used for all functions
		default = true;
#		min = false;
	};

	interval = 0; // zero means interval is equal to result set size
};

api:
{
	#templatedir	= "/etc/smartmet/plugins/edr/tmpl";
	items:
	(
		{
			url = "/edr";
			template = "home.json";
		},
		{
			url = "/edr/api";
			template = "api.json";
		},
		{
			url = "/edr/api/conformance";
			template = "conformance.json";
		}
	)
};

// display precision for variables
// note: g++ (GCC) 4.1.2 20071124 (Red Hat 4.1.2-42)
// seems to have a bug in copying maps in maps.
// Define atleast one variable besides "default"
// to make sure the map of precisions is not empty.

precision:
{
	// default is the first one listed

	enabled = ["normal","double","full","auto"];
	    // The automagic uses precision from data
    	    auto:
    	    {	       
            	       default: -1;
    	    };


	// normal output mode for meteograms & tables
	normal:
	{
		default			= 0;

		Precipitation1h		= 1;
		SigWaveHeight		= 1;
		CorrectedReflectivity	= 1;
		TotalPrecipitationF0	= 1;
		TotalPrecipitationF10	= 1;
		TotalPrecipitationF25	= 1;
		TotalPrecipitationF50	= 1;
		TotalPrecipitationF75	= 1;
		TotalPrecipitationF90	= 1;
		TotalPrecipitationF100	= 1;
		PrecipitationRate	= 2;

		stationlatitude		= 5;
		stationlat		= 5;
		stationlongitude	= 5;
		stationlon		= 5;
		latitude		= 5;
		longitude		= 5;
		lon			= 5;
		lat			= 5;
		latlon			= 5;
		lonlat			= 5;
		nearlatitude		= 5;
		nearlongitude		= 5;
		nearlatlon		= 5;
		nearlonlat		= 5;
		direction		= 1;
		distance		= 1;
		elevation		= 1;
		sunelevation		= 1;
		sundeclination		= 1;
		sunazimuth		= 1;
		moonphase		= 1;
		wsp_pt1s_avg		= 1;
		wdp_pt1s_avg		= 0;
		rhp_pt1s_avg		= 1;
		tdp_pt1s_avg		= 1;
		tap_pt1s_avg		= 1;
		uep_pt1s_avg		= 1;
		uap_pt1s_avg		= 1;
		level_no		= 0;
		level_status		= 0;
		level_time		= 0;
		level_altitude		= 0;
		level_pressure		= 1;
		level_longitude		= 5;
		level_latitude		= 5;
		sounding_type		= 0;
	};

	// double precision for graphs
	double:
	{
		default			= 1;

		PrecipitationForm	= 0;
		PrecipitationType	= 0;
		WeatherSymbol1		= 0;
		WeatherSymbol3		= 0;

		CorrectedReflectivity	= 2;
		TotalPrecipitationF0	= 2;
		TotalPrecipitationF10	= 2;
		TotalPrecipitationF25	= 2;
		TotalPrecipitationF50	= 2;
		TotalPrecipitationF75	= 2;
		TotalPrecipitationF90	= 2;
		TotalPrecipitationF100	= 2;
		PrecipitationRate	= 4;

		stationlatitude		= 7;
		stationlat		= 7;
		stationlongitude	= 7;
		stationlon		= 7;
		latitude		= 7;
		longitude		= 7;
		lon			= 7;
		lat			= 7;
		latlon			= 7;
		lonlat			= 7;
		nearlatitude		= 7;
		nearlongitude		= 7;
		nearlatlon		= 7;
		nearlonlat		= 7;
		direction		= 2;
		distance		= 2;
		elevation		= 2;
		sunelevation		= 2;
		sundeclination		= 2;
		sunazimuth		= 2;
		moonphase		= 2;
		wsp_pt1s_avg		= 1;
		wdp_pt1s_avg		= 0;
		rhp_pt1s_avg		= 1;
		tdp_pt1s_avg		= 3;
		tap_pt1s_avg		= 3;
		uep_pt1s_avg		= 3;
		uap_pt1s_avg		= 3;
		level_no		= 0;
		level_status		= 0;
		level_time		= 0;
		level_altitude		= 0;
		level_pressure		= 1;
		level_longitude		= 7;
		level_latitude		= 7;
		sounding_type		= 0;
	};

	// full precision for math etc
	full:
	{
		default			= 16;

		PrecipitationForm	= 0;
		PrecipitationType	= 0;
		WeatherSymbol1		= 0;
		WeatherSymbol3		= 0;
	};
};

parameter_info:
{
    Pressure:
    {
        description:
        {
            en = "Air pressure";
        };
        unit:
        {
            label:
            {
                en = "Hectopascal";
            };
            symbol:
            {
                value = "hPa";
                type = "https://codes.wmo.int/common/unit/hPa";
            };
        };
    };
    Temperature:
    {
        description:
        {
            en = "Air temperature";
        };
        unit:
        {
            label:
            {
                en = "Celsius";
            };
            symbol:
            {
                value = "°C";
                type = "https://codes.wmo.int/common/unit/_degC";
            };
        };
    };
    DewPoint:
    {
        description:
        {
            en = "Dew point temperature";
        };
        unit:
        {
            label:
            {
                en = "Celsius";
            };
            symbol:
            {
                value = "°C";
                type = "https://codes.wmo.int/common/unit/_degC";
            };
        };
    };
    Humidity:
    {
        description:
        {
            en = "Relative humidity";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    TopoGraf:
    {
        description:
        {
            en = "Topography";
        };
        unit:
        {
            label:
            {
                en = "Meter";
            };
            symbol:
            {
                value = "m";
                type = "https://codes.wmo.int/common/unit/m";
            };
        };
    };
    PrecipitableWater:
    {
        description:
        {
            en = "Precipitable water";
        };
        unit:
        {
            label:
            {
                en = "Kilogram per square meter";
            };
            symbol:
            {
                value = "kg/m²";
                type = "https://codes.wmo.int/common/unit/kg_m-2";
            };
        };
    };
    SnowDepth:
    {
        description:
        {
            en = "Snow depth";
        };
        unit:
        {
            label:
            {
                en = "Meter";
            };
            symbol:
            {
                value = "m";
                type = "https://codes.wmo.int/common/unit/m";
            };
        };
    };
    CAPE:
    {
        description:
        {
            en = "Convective available potential energy";
        };
        unit:
        {
            label:
            {
                en = "Joule per kilogram";
            };
            symbol:
            {
                value = "J/kg";
                type = "https://codes.wmo.int/common/unit/J_kg-1";
            };
        };
    };
    CIN:
    {
        description:
        {
            en = "Convective inhibition";
        };
        unit:
        {
            label:
            {
                en = "Joule per kilogram";
            };
            symbol:
            {
                value = "J/kg";
                type = "https://codes.wmo.int/common/unit/J_kg-1";
            };
        };
    };
    LandSeaMask:
    {
        description:
        {
            en = "Land-sea mask";
        };
        unit:
        {
            label:
            {
                en = "Proportion";
            };
            symbol:
            {
                value = "1";
                type = "https://codes.wmo.int/common/unit/1";
            };
        };
    };
    GroundTemperature:
    {
        description:
        {
            en = "Ground temperature";
        };
        unit:
        {
            label:
            {
                en = "Celsius";
            };
            symbol:
            {
                value = "°C";
                type = "https://codes.wmo.int/common/unit/_degC";
            };
        };
    };
    WindGust:
    {
        description:
        {
            en = "Wind gust";
        };
        unit:
        {
            label:
            {
                en = "Meter per second";
            };
            symbol:
            {
                value = "m/s";
                type = "https://codes.wmo.int/common/unit/m_s-1";
            };
        };
    };
    PressureAtStationLevel:
    {
        description:
        {
            en = "Pressure at station level";
        };
        unit:
        {
            label:
            {
                en = "Hectopascal";
            };
            symbol:
            {
                value = "hPa";
                type = "https://codes.wmo.int/common/unit/hPa";
            };
        };
    };
    IceCover:
    {
        description:
        {
            en = "Ice cover";
        };
        unit:
        {
            label:
            {
                en = "Proportion";
            };
            symbol:
            {
                value = "1";
                type = "https://codes.wmo.int/common/unit/1";
            };
        };
    };
    WindSpeedMS:
    {
        description:
        {
            en = "Wind speed";
        };
        unit:
        {
            label:
            {
                en = "Meter per second";
            };
            symbol:
            {
                value = "m/s";
                type = "https://codes.wmo.int/common/unit/m_s-1";
            };
        };
    };
    WindDirection:
    {
        description:
        {
            en = "Wind direction";
        };
        unit:
        {
            label:
            {
                en = "Degree";
            };
            symbol:
            {
                value = "°";
                type = "https://codes.wmo.int/common/unit/deg";
            };
        };
    };
    WindVectorMS:
    {
        description:
        {
            en = "Wind vector";
        };
        unit:
        {
            label:
            {
                en = "Meter per second";
            };
            symbol:
            {
                value = "m/s";
                type = "https://codes.wmo.int/common/unit/m_s-1";
            };
        };
    };
    HourlyMaximumGust:
    {
        description:
        {
            en = "Hourly maximum wind gust";
        };
        unit:
        {
            label:
            {
                en = "Meter per second";
            };
            symbol:
            {
                value = "m/s";
                type = "https://codes.wmo.int/common/unit/m_s-1";
            };
        };
    };
    WindUMS:
    {
        description:
        {
            en = "U-component of wind";
        };
        unit:
        {
            label:
            {
                en = "Meter per second";
            };
            symbol:
            {
                value = "m/s";
                type = "https://codes.wmo.int/common/unit/m_s-1";
            };
        };
    };
    WindVMS:
    {
        description:
        {
            en = "V-component of wind";
        };
        unit:
        {
            label:
            {
                en = "Meter per second";
            };
            symbol:
            {
                value = "m/s";
                type = "https://codes.wmo.int/common/unit/m_s-1";
            };
        };
    };
    TotalCloudCover:
    {
        description:
        {
            en = "Total cloud cover";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    LowCloudCover:
    {
        description:
        {
            en = "Low cloud cover";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    MediumCloudCover:
    {
        description:
        {
            en = "Medium cloud cover";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    HighCloudCover:
    {
        description:
        {
            en = "High cloud cover";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    MiddleAndLowCloudCover:
    {
        description:
        {
            en = "Middle and low cloud cover";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    Precipitation1h:
    {
        description:
        {
            en = "Hourly precipitation";
        };
        unit:
        {
            label:
            {
                en = "Millimeter";
            };
            symbol:
            {
                value = "mm";
                type = "https://codes.wmo.int/common/unit/mm";
            };
        };
    };
    PrecipitationForm:
    {
        description:
        {
            en = "Precipitation form";
        };
        unit:
        {
            label:
            {
                en = "Code";
            };
            symbol:
            {
                value = "1";
                type = "https://codes.wmo.int/common/unit/1";
            };
        };
    };
    PrecipitationType:
    {
        description:
        {
            en = "Precipitation type";
        };
        unit:
        {
            label:
            {
                en = "Code";
            };
            symbol:
            {
                value = "1";
                type = "https://codes.wmo.int/common/unit/1";
            };
        };
    };
    ProbabilityThunderstorm:
    {
        description:
        {
            en = "Probability of thunderstorm";
        };
        unit:
        {
            label:
            {
                en = "Percent";
            };
            symbol:
            {
                value = "%";
                type = "https://codes.wmo.int/common/unit/_";
            };
        };
    };
    FogIntensity:
    {
        description:
        {
            en = "Fog intensity";
        };
        unit:
        {
            label:
            {
                en = "Code";
            };
            symbol:
            {
                value = "1";
                type = "https://codes.wmo.int/common/unit/1";
            };
        };
    };
};

collection_info:
{
  querydata_engine:
  (
    {
      id = "ecmwf_surface";
      title = "ECMWF Surface Level Forecast";
      description = "European Centre for Medium-Range Weather Forecasts (ECMWF) surface level data. ECMWF provides global numerical weather prediction forecasts based on medium-range and ensemble models.";
      keywords = ["ecmwf","global","nwp","surface","forecast","europe"];
    },
    {
      id = "ecmwf_pressure";
      title = "ECMWF Pressure Level Forecast";
      description = "European Centre for Medium-Range Weather Forecasts (ECMWF) pressure level data. This collection provides atmospheric data at standard pressure levels for upper-air analysis and forecasting.";
      keywords = ["ecmwf","global","nwp","pressure","isobaric","forecast","europe"];
    },
    {
      id = "meps_surface";
      title = "MEPS Surface Level Forecast";
      description = "MetCoOp Ensemble Prediction System (MEPS) surface level data. MEPS is a convection-permitting ensemble prediction system covering the Nordic region, providing probabilistic forecasts.";
      keywords = ["meps","harmonie","metcoop","nordic","nwp","surface","forecast"];
    },
    {
      id = "meps_pressure";
      title = "MEPS Pressure Level Forecast";
      description = "MetCoOp Ensemble Prediction System (MEPS) pressure level data. This collection provides atmospheric data at standard pressure levels for upper-air analysis and ensemble forecasting applications.";
      keywords = ["meps","harmonie","metcoop","nordic","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "gfs_surface";
      title = "GFS Surface Level Forecast";
      description = "Global Forecast System (GFS) surface level data from NOAA. GFS is a global numerical weather prediction system providing meteorological forecasts.";
      keywords = ["gfs","noaa","global","nwp","surface","forecast"];
    },
    {
      id = "gfs_pressure";
      title = "GFS Pressure Level Forecast";
      description = "Global Forecast System (GFS) pressure level data from NOAA. This collection provides atmospheric data at various pressure levels (isobaric surfaces) for upper-air analysis and forecasting.";
      keywords = ["gfs","noaa","global","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "gem_surface";
      title = "GEM Surface Level Forecast";
      description = "Global Environmental Multiscale (GEM) model surface level data from Environment and Climate Change Canada (ECCC). GEM is a global numerical weather prediction model.";
      keywords = ["gem","eccc","canada","global","nwp","surface","forecast"];
    },
    {
      id = "gem_pressure";
      title = "GEM Pressure Level Forecast";
      description = "Global Environmental Multiscale (GEM) model pressure level data from Environment and Climate Change Canada (ECCC). This collection provides atmospheric data at standard pressure levels for upper-air analysis and forecasting.";
      keywords = ["gem","eccc","canada","global","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "icon_surface";
      title = "ICON Surface Level Forecast";
      description = "ICOsahedral Nonhydrostatic (ICON) model surface level data from Deutscher Wetterdienst (DWD). ICON is a global numerical weather prediction model.";
      keywords = ["icon","dwd","germany","global","nwp","surface","forecast"];
    },
    {
      id = "icon_pressure";
      title = "ICON Pressure Level Forecast";
      description = "ICOsahedral Nonhydrostatic (ICON) model pressure level data from Deutscher Wetterdienst (DWD). This collection provides atmospheric data at standard pressure levels for upper-air analysis and forecasting.";
      keywords = ["icon","dwd","germany","global","nwp","pressure","isobaric","forecast"];
    },
    {
      id = "wrf_surface";
      title = "WRF Surface Level Forecast";
      description = "Weather Research and Forecasting (WRF) model surface level data. WRF is a mesoscale numerical weather prediction system designed for both atmospheric research and operational forecasting applications.";
      keywords = ["wrf","mesoscale","nwp","surface","forecast","research"];
    },
    {
      id = "wrf_pressure";
      title = "WRF Pressure Level Forecast";
      description = "Weather Research and Forecasting (WRF) model pressure level data. This collection provides atmospheric data at standard pressure levels for upper-air analysis and forecasting.";
      keywords = ["wrf","mesoscale","nwp","pressure","isobaric","forecast","research"];
    },
    {
      id = "arpege_surface";
      title = "ARPEGE Surface Level Forecast";
      description = "Action de Recherche Petite Echelle Grande Echelle (ARPEGE) model surface level data from Météo-France. ARPEGE is a global numerical weather prediction model.";
      keywords = ["arpege","meteofrance","france","global","nwp","surface","forecast"];
    },
    {
      id = "arpege_pressure";
      title = "ARPEGE Pressure Level Forecast";
      description = "Action de Recherche Petite Echelle Grande Echelle (ARPEGE) model pressure level data from Météo-France. This collection provides atmospheric data at standard pressure levels for upper-air analysis and forecasting.";
      keywords = ["arpege","meteofrance","france","global","nwp","pressure","isobaric","forecast"];
    }
  )
}
